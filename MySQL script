CREATE SCHEMA IF NOT EXISTS saltyfirm DEFAULT CHARACTER SET UTF8MB4;
USE saltyfirm;

-- create new table privileges --
CREATE TABLE IF NOT EXISTS `privileges`
(
        privileges_id       INT              UNSIGNED    NOT NULL    AUTO_INCREMENT     PRIMARY KEY,
        access_level        VARCHAR(10)                  NOT NULL
)
    ENGINE = InnoDB;

-- create new table user --
CREATE TABLE IF NOT EXISTS `user`
(
        user_id             INT              UNSIGNED    NOT NULL    AUTO_INCREMENT     PRIMARY KEY,
        username            VARCHAR(45)                  NOT NULL    UNIQUE,
        `password`          VARCHAR(50)                  NOT NULL,
        firstname           VARCHAR(45)                  NOT NULL,
        lastname            VARCHAR(75)                  NOT NULL,
        phone_number        INT                          NOT NULL    UNIQUE,
        sex                 VARCHAR(15),
        birthdate           DATE                         NOT NULL,
        education           VARCHAR(45),
        mail                VARCHAR(100)                 NOT NULL    UNIQUE,
        nationality         VARCHAR(45),
        privileges_fk_id    INT              UNSIGNED    NOT NULL,
            FOREIGN KEY (privileges_fk_id)
            REFERENCES `privileges` (privileges_id)
)
    ENGINE = InnoDB;

-- create new table firm --
CREATE TABLE IF NOT EXISTS firm
(
        firm_id             INT              UNSIGNED    NOT NULL    AUTO_INCREMENT     PRIMARY KEY,
        firm_name           VARCHAR(100)                 NOT NULL,
        firm_type           VARCHAR(45)                  NOT NULL,
        overall_score       DECIMAL,
        `description`       VARCHAR(500),
        logo_url            VARCHAR(45)
)
    ENGINE = InnoDB;

-- create new table department --
CREATE TABLE IF NOT EXISTS department
(
        department_id       INT              UNSIGNED    NOT NULL    AUTO_INCREMENT     PRIMARY KEY,
        department_name     VARCHAR(65)                  NOT NULL,
        department_address  VARCHAR(200)                 NOT NULL,
        department_score    DECIMAL,
        firm_fk_id          INT              UNSIGNED    NOT NULL,
            FOREIGN KEY (firm_fk_id)
            REFERENCES firm (firm_id)
)
    ENGINE = InnoDB;

-- create new table review --
CREATE TABLE IF NOT EXISTS review
(
        review_id           INT              UNSIGNED    NOT NULL    AUTO_INCREMENT     PRIMARY KEY,
        post                VARCHAR(600),
        salary              INT NULL,
        position            VARCHAR(100),
        pension_scheme      INT,
        benefits            INT,
        management          INT,
        work_environment    INT,
        flexibility         INT,
        employment_time     INT,
        user_fk_id          INT              UNSIGNED    NOT NULL,
        department_fk_id    INT              UNSIGNED    NOT NULL,
            FOREIGN KEY (user_fk_id)
            REFERENCES `user` (user_id),
            FOREIGN KEY (department_fk_id)
            REFERENCES department (department_id)
)
    ENGINE = InnoDB;

-- create new table vote --
CREATE TABLE IF NOT EXISTS vote
(
        vote_id             INT              UNSIGNED    NOT NULL    AUTO_INCREMENT      PRIMARY KEY,
        vote                BOOLEAN,
        user_fk_id          INT              UNSIGNED    NOT NULL,
        review_fk_id        INT              UNSIGNED    NOT NULL,
            FOREIGN KEY (review_fk_id)
            REFERENCES review (review_id),
            FOREIGN KEY (user_fk_id)
            REFERENCES `user` (user_id)
)
    ENGINE = InnoDB;



INSERT INTO saltyfirm.privileges(access_level)
VALUE ('admin'),
    ('user'),
    ('visitor');



    INSERT INTO saltyfirm.user(username, password, firstname, lastname, phone_number, sex, birthdate, education, mail, nationality, privileges_fk_id)
    VALUES ('test3', 'test3', 'C#', 'Strap', 64037621, 'm', '1990-02-04', 'Tjener', 'test3@kea.dk', 'Sverige', 3),
           ('test2', 'test2', 'Java', 'Boot', 12345678, 'f', '1991-12-04', 'Datamatiker', 'test2@kea.dk', 'Danmark', 2),
           ('test1', 'test1', 'Python', 'Spring', 98765432, 'm', '1990-06-23', 'Skraldemand', 'test1@kea.dk', 'Tyskland', 1);